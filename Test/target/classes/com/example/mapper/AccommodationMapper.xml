<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.AccommodationMapper">

    <select id="getList" resultType="com.example.domain.AccommodationDTO">
        select * from accommodation
    </select>
    
	<!-- 숙소(사업체) 등록 -->
 	<insert id="insertaccommdation">
		INSERT INTO ACCOMMODATION
			(ac_id, email_id, ac_title, ac_type, ac_address, ac_info, checkin, checkout, bu_name)
		VALUES 
			(#{ac_id}, #{email_id}, #{ac_title}, #{ac_type}, #{ac_address}, #{ac_info}, #{checkin}, #{checkout}, #{bu_name})
 	</insert>

	<update id="updateaccommdation">
		update 
			accommodation
 		set 
 			email_id=#{email_id}, ac_title=#{ac_title}, ac_type=#{ac_type}, 
 			ac_address=#{ac_address}, ac_info=#{ac_info}, checkin=#{checkin}, checkout=#{checkout}
 		where 
 			ac_id=#{ac_id}
 	</update>
	
	<delete id="deleteaccommdation">
		delete accommodation where ac_id=#{ac_id}
 	</delete>
 	
 	
	<!-- 숙소 검색 (숙소 아이디로) (사업자 페이지에서 자신의 숙소를 보여줄 때 사용한다)-->
	<select id="searchByac_id" resultType="com.example.domain.AccommodationDTO">
        select * from accommodation
        where
        	ac_id =#{ac_id}
    </select>
    
    <!-- 숙소 검색 (숙소 제목, checkin, checkout 시간으로) -->
	<!-- 검색한 체크인 시간과 체크인 아웃 시간과 이름에 알맞는 숙소를 보여줍니다    (만약, 체크인, 체크아웃 을 설정하지않았다면 각각 0년, 9999년으로 설정해야겠다)-->
	<!-- &gt 은  > 을 의미합니다 -->
	<select id="searchListByTitleAndDateRange" resultType="com.example.domain.AccommodationDTO">
	    select * from accommodation
	    where
	        ac_title like '%' || #{ac_title} || '%'
	        and checkin &gt;= #{checkin_day} 
	        and checkout &lt;= #{checkout_day}
	</select>
    
    <select id="searchByac_type" resultType="com.example.domain.AccommodationDTO">
        select * from accommodation
        where
        	ac_type = #{ac_type}
    </select>

</mapper>
